<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Helps You Analyze Economic Data • econanalyzr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Helps You Analyze Economic Data">
<meta name="description" content="This package provides a handful of functions that execute calculations commonly used for economic data analysis like tabulating simple percent changes, annualized changes, diffusion indexes as well as general data series indexing. The package also containers helper functions for getting flat file data from the Bureau of Labor Statistics (BLS) and includes helper data frames of various geographic and industrial hierarchies from the Bureau of Labor Statistics, Bureau of Economic Analysis, Census Bureau, World Bank, Eurostat, IMF, and others.">
<meta property="og:description" content="This package provides a handful of functions that execute calculations commonly used for economic data analysis like tabulating simple percent changes, annualized changes, diffusion indexes as well as general data series indexing. The package also containers helper functions for getting flat file data from the Bureau of Labor Statistics (BLS) and includes helper data frames of various geographic and industrial hierarchies from the Bureau of Labor Statistics, Bureau of Economic Analysis, Census Bureau, World Bank, Eurostat, IMF, and others.">
<meta property="og:image" content="http://justanesta.com/econanalyzr/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">econanalyzr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/calc-change-over-time.html">Change Over Time</a></li>
    <li><a class="dropdown-item" href="articles/econanalyzr-verb-workflow.html">Functions for working with {econanalyzr} tibbles</a></li>
    <li><a class="dropdown-item" href="articles/get-bls.html">Retrieving Data From BLS Text File Database</a></li>
    <li><a class="dropdown-item" href="articles/working-with-indexes.html">Calculating Indices</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/anesta95/econanalyzr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="econanalyzr">econanalyzr<a class="anchor" aria-label="anchor" href="#econanalyzr"></a>
</h1>
</div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of econanalyzr is to provide a collection of functions and helper datasets that help users obtain, analyze, and visualize economic data. These functions can be broken up into <strong>data import</strong> functions, <strong>data analysis</strong> functions, and <strong>data visualization</strong> functions.</p>
<p>These are some of the most commonly used functions currently available:</p>
<ul>
<li>
<code><a href="reference/get_bls_data.html">get_bls_data()</a></code> which is a wrapper that sends HTTP requests to the BLS site with a valid user-supplied email to download TSV data from their flat file database.</li>
<li>
<code><a href="reference/percent_change.html">percent_change()</a></code> which calculates the percentage change between two numeric scalars or vectors.</li>
<li>
<code><a href="reference/annualize_change.html">annualize_change()</a></code> which calculate the annualized rate of change between two numeric scalars or vectors for a given time period.</li>
<li>
<code><a href="reference/create_index.html">create_index()</a></code> which calculates a 0 or 100-based index version of a numeric vector based on the starting value supplied.</li>
<li>
<code><a href="reference/create_diffusion_index.html">create_diffusion_index()</a></code> which calculates a diffusion index for two numeric scalars or vectors based on the <a href="https://www.richmondfed.org/-/media/richmondfedorg/publications/research/economic_quarterly/2004/fall/pdf/harrisowenssarte.pdf" class="external-link">Federal Reserve</a> or <a href="https://cdn.ihsmarkit.com/www/pdf/1218/IHS-Markit-PMI-Introduction.pdf" class="external-link">IHS Markit</a> methods or one numeric scalar or vector based on the <a href="https://www.conference-board.org/data/bci/index.cfm?id=2180" class="external-link">Conference Board</a> method.</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of econanalyzr from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"anesta95/econanalyzr"</span><span class="op">)</span></span>
<span><span class="co"># or</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"anesta95/econanalyzr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-import-examples">Data Import Examples<a class="anchor" aria-label="anchor" href="#data-import-examples"></a>
</h2>
<p>Use the <code><a href="reference/get_bls_data.html">get_bls_data()</a></code> function to get TSV data from the BLS survey flat file database. This function will require you to provide a valid email in the request <code>user-agent</code> which is now required to programmatically obtain BLS data in this way.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span><span class="va">bls_jolts</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_bls_data.html">get_bls_data</a></span><span class="op">(</span></span>
<span>  bls_url <span class="op">=</span> <span class="st">"https://download.bls.gov/pub/time.series/jt/jt.data.1.AllItems"</span>, </span>
<span>  email <span class="op">=</span> <span class="st">"govdata.decimeter618@passmail.net"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">bls_jolts</span><span class="op">)</span></span>
<span><span class="co">#&gt; spc_tbl_ [607,649 × 5] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ series_id     : chr [1:607649] "JTS000000000000000HIL" "JTS000000000000000HIL" "JTS000000000000000HIL" "JTS000000000000000HIL" ...</span></span>
<span><span class="co">#&gt;  $ year          : chr [1:607649] "2000" "2001" "2001" "2001" ...</span></span>
<span><span class="co">#&gt;  $ period        : chr [1:607649] "M12" "M01" "M02" "M03" ...</span></span>
<span><span class="co">#&gt;  $ value         : chr [1:607649] "5426" "5722" "5303" "5528" ...</span></span>
<span><span class="co">#&gt;  $ footnote_codes: chr [1:607649] NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  - attr(*, "spec")=</span></span>
<span><span class="co">#&gt;   .. cols(</span></span>
<span><span class="co">#&gt;   ..   .default = col_character(),</span></span>
<span><span class="co">#&gt;   ..   series_id = col_character(),</span></span>
<span><span class="co">#&gt;   ..   year = col_character(),</span></span>
<span><span class="co">#&gt;   ..   period = col_character(),</span></span>
<span><span class="co">#&gt;   ..   value = col_character(),</span></span>
<span><span class="co">#&gt;   ..   footnote_codes = col_character()</span></span>
<span><span class="co">#&gt;   .. )</span></span>
<span><span class="co">#&gt;  - attr(*, "problems")=&lt;externalptr&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-analysis-examples">Data Analysis Examples<a class="anchor" aria-label="anchor" href="#data-analysis-examples"></a>
</h2>
<p>Use the <code><a href="reference/percent_change.html">percent_change()</a></code> function to calculate the percentage change between two numeric scalars and vectors:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span><span class="co"># Scalar → scalar</span></span>
<span><span class="fu"><a href="reference/percent_change.html">percent_change</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">120</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.2</span></span>
<span></span>
<span><span class="co"># Vectorized (pairwise)</span></span>
<span><span class="fu"><a href="reference/percent_change.html">percent_change</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">80</span>, <span class="fl">50</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">110</span>, <span class="fl">72</span>, <span class="fl">55</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0.1 -0.1  0.1</span></span>
<span></span>
<span><span class="co"># Scalar recycling (start is scalar)</span></span>
<span><span class="fu"><a href="reference/percent_change.html">percent_change</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">101</span>, <span class="fl">105</span>, <span class="fl">120</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.01 0.05 0.20</span></span>
<span></span>
<span><span class="co"># NA propagates (emits a classed warning)</span></span>
<span><span class="fu"><a href="reference/percent_change.html">percent_change</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">110</span>, <span class="fl">120</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: NA values detected; returning NA for those positions.</span></span>
<span><span class="co">#&gt; [1] 0.1  NA</span></span>
<span></span>
<span><span class="co"># Division by zero yields NA (with a single classed warning)</span></span>
<span><span class="fu"><a href="reference/percent_change.html">percent_change</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Division by zero in `start_value`; returning NA for those positions.</span></span>
<span><span class="co">#&gt; [1]  NA 0.5</span></span></code></pre></div>
<p>Use the <code><a href="reference/annualize_change.html">annualize_change()</a></code> function to calculate the annualized <em>one month</em> change between two numeric vectors of values:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Monthly: from 100 to 103 over 1 month (12 months/year)</span></span>
<span><span class="fu"><a href="reference/annualize_change.html">annualize_change</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">103</span>, time_elapsed <span class="op">=</span> <span class="fl">1</span>, time_unit <span class="op">=</span> <span class="st">"monthly"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.4257609</span></span>
<span></span>
<span><span class="co"># Vectorized, scalar recycling (quarterly): exponent = 4 / time_elapsed</span></span>
<span><span class="fu"><a href="reference/annualize_change.html">annualize_change</a></span><span class="op">(</span></span>
<span>  start_values <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  end_values   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">101</span>, <span class="fl">98</span>, <span class="fl">120</span><span class="op">)</span>,</span>
<span>  time_elapsed <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  time_unit    <span class="op">=</span> <span class="st">"quarterly"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  0.0201 -0.0396  0.4400</span></span>
<span></span>
<span><span class="co"># Daily with default Gregorian year_length = 365.2425</span></span>
<span><span class="fu"><a href="reference/annualize_change.html">annualize_change</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">101</span>, time_elapsed <span class="op">=</span> <span class="fl">10</span>, time_unit <span class="op">=</span> <span class="st">"daily"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.4382518</span></span>
<span></span>
<span><span class="co"># Weekly using exact 52-week convention (364 days)</span></span>
<span><span class="fu"><a href="reference/annualize_change.html">annualize_change</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">101</span>, time_elapsed <span class="op">=</span> <span class="fl">2</span>, time_unit <span class="op">=</span> <span class="st">"weekly"</span>, year_length <span class="op">=</span> <span class="fl">364</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.2952563</span></span></code></pre></div>
<p>Use the <code><a href="reference/create_index.html">create_index()</a></code> to transform a vector of numeric values into a 0 or 100 based index:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Base-100 index (default): base is the first element (50 -&gt; 100)</span></span>
<span><span class="fu"><a href="reference/create_index.html">create_index</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">150</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 100 200 300</span></span>
<span></span>
<span><span class="co"># Percent-change index (idx_type = 0): base becomes 0%</span></span>
<span><span class="fu"><a href="reference/create_index.html">create_index</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">100</span>, <span class="fl">120</span><span class="op">)</span>, idx_pos <span class="op">=</span> <span class="fl">2</span>, idx_type <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -10   0  20</span></span>
<span></span>
<span><span class="co"># Select base by *name* (only if the vector is named)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01"</span> <span class="op">=</span> <span class="fl">80</span>, <span class="st">"2023-02"</span> <span class="op">=</span> <span class="fl">100</span>, <span class="st">"2023-03"</span> <span class="op">=</span> <span class="fl">120</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/create_index.html">create_index</a></span><span class="op">(</span><span class="va">x</span>, idx_pos <span class="op">=</span> <span class="st">"2023-02"</span><span class="op">)</span>            <span class="co"># base-100 with named base</span></span>
<span><span class="co">#&gt; 2023-01 2023-02 2023-03 </span></span>
<span><span class="co">#&gt;      80     100     120</span></span>
<span></span>
<span><span class="fu"><a href="reference/create_index.html">create_index</a></span><span class="op">(</span><span class="va">x</span>, idx_pos <span class="op">=</span> <span class="st">"2023-02"</span>, idx_type <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>  <span class="co"># percent change from "2023-02"</span></span>
<span><span class="co">#&gt; 2023-01 2023-02 2023-03 </span></span>
<span><span class="co">#&gt;     -20       0      20</span></span>
<span></span>
<span><span class="co"># Non-base NA/NaN/Inf values warn once and propagate</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="cn">NA</span>, <span class="fl">200</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/create_index.html">create_index</a></span><span class="op">(</span><span class="va">y</span>, idx_pos <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Some non-base values are NA/NaN/Inf; resulting index will contain</span></span>
<span><span class="co">#&gt; NA/NaN at those positions.</span></span>
<span><span class="co">#&gt; [1] 100  NA 200</span></span></code></pre></div>
<p>Use the <code><a href="reference/create_diffusion_index.html">create_diffusion_index()</a></code> to calculate a Federal Reserve or IHS diffusion index from numeric values of percent increase, percent unchanged, or percent decreasing or a Conference Board diffusion index from percent change values.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Federal Reserve method: (pct_increased − pct_decreased) * 100</span></span>
<span><span class="fu"><a href="reference/create_diffusion_index.html">create_diffusion_index</a></span><span class="op">(</span></span>
<span>  pct_increased <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.60</span>, <span class="fl">0.55</span>, <span class="fl">0.40</span><span class="op">)</span>,</span>
<span>  pct_decreased <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.20</span>, <span class="fl">0.25</span>, <span class="fl">0.35</span><span class="op">)</span>,</span>
<span>  idx_type      <span class="op">=</span> <span class="st">"Federal Reserve"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 40 30  5</span></span>
<span></span>
<span><span class="co"># Scalar recycling with FR (scalar increased, vector decreased)</span></span>
<span><span class="fu"><a href="reference/create_diffusion_index.html">create_diffusion_index</a></span><span class="op">(</span></span>
<span>  pct_increased <span class="op">=</span> <span class="fl">0.50</span>,</span>
<span>  pct_decreased <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.20</span>, <span class="fl">0.25</span>, <span class="fl">0.35</span><span class="op">)</span>,</span>
<span>  idx_type      <span class="op">=</span> <span class="st">"Federal Reserve"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 30 25 15</span></span>
<span></span>
<span><span class="co"># IHS-PMI method: (pct_increased + 0.5 * pct_unchanged) * 100</span></span>
<span><span class="fu"><a href="reference/create_diffusion_index.html">create_diffusion_index</a></span><span class="op">(</span></span>
<span>  pct_increased <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.55</span>, <span class="fl">0.50</span><span class="op">)</span>,</span>
<span>  pct_unchanged <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.30</span>, <span class="fl">0.35</span><span class="op">)</span>,</span>
<span>  idx_type      <span class="op">=</span> <span class="st">"IHS-PMI"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 70.0 67.5</span></span>
<span></span>
<span><span class="co"># Conference Board method (threshold ±0.05%): encode and average</span></span>
<span><span class="va">pc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">+</span><span class="fl">0.0010</span>, <span class="op">+</span><span class="fl">0.0005</span>, <span class="fl">0.0000</span>, <span class="op">-</span><span class="fl">0.0005</span>, <span class="op">-</span><span class="fl">0.0020</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/create_diffusion_index.html">create_diffusion_index</a></span><span class="op">(</span>pct_change <span class="op">=</span> <span class="va">pc</span>, idx_type <span class="op">=</span> <span class="st">"Conference Board"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 50</span></span>
<span></span>
<span><span class="co"># Conference Board with NA: NA are dropped from the mean (warns once)</span></span>
<span><span class="fu"><a href="reference/create_diffusion_index.html">create_diffusion_index</a></span><span class="op">(</span>pct_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.001</span>, <span class="cn">NA</span>, <span class="op">-</span><span class="fl">0.001</span><span class="op">)</span>, idx_type <span class="op">=</span> <span class="st">"Conference Board"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: NA values found in `pct_change`; they will be dropped when averaging.</span></span>
<span><span class="co">#&gt; [1] 50</span></span>
<span></span>
<span></span>
<span><span class="co"># All NA example returns NA (single, specific warning)</span></span>
<span><span class="fu"><a href="reference/create_diffusion_index.html">create_diffusion_index</a></span><span class="op">(</span>pct_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA_real_</span>, <span class="cn">NA_real_</span><span class="op">)</span>, idx_type <span class="op">=</span> <span class="st">"Conference Board"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: All encoded values are NA; returning NA_real_.</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="econanalyzr-tibble-structure-and-functions">
<code>econanalyzr</code> Tibble Structure and Functions<a class="anchor" aria-label="anchor" href="#econanalyzr-tibble-structure-and-functions"></a>
</h2>
<p>Every econ analysis data CSV file at minimum will have the following columns:</p>
<ul>
<li><p><code>date</code>: The date associated with the data in the data row. The date will be in <code>YYYY-MM-DD</code> format regardless of the time period the date captures. All dates will be the first day of the time period. For example, data for April 2025 will be displayed as <code>2025-04-01</code>. Data for Q2 2025 will be <code>2025-04-01</code>. Data for the year 2025 will be <code>2025-01-01</code>. This will have a data type <code>double</code> with a class of <code>Date</code>.</p></li>
<li><p><code>date_period_text</code>: The time period that each row of the data captures. The most common formats are <code>Monthly</code>, <code>Quarterly</code>, and <code>Annually</code>. This will have a data type and class of <code>character</code>.</p></li>
<li><p><code>value</code>: The value that is being measured in the data. This will have a data type of <code>double</code> and a class of <code>numeric</code>.</p></li>
<li><p><code>data_element_text</code>: What the data in the <code>value</code> column describes. This will have a data type and class of <code>character</code>.</p></li>
<li><p><code>data_measure_text</code>: The mathematical expression the data in the <code>value</code> column is expressed as. The most common are <code>Level</code>, <code>Rate</code>, <code>Ratio</code>, <code>Percentage</code>, <code>Proportion</code>, and <code>Index</code>. This will have a data type and class of <code>character</code>.</p></li>
<li><p><code>date_measure_text</code>: The change in dates measured by the data in the <code>value</code> column. The most common are <code>Current</code>, <code>Year-over-year</code>, <code>Month-over-month</code> and <code>Quarter-over-quarter</code>. This will have a data type and class of <code>character</code>.</p></li>
<li><p><code>data_transform_text</code>: Any mathematical transformations applied to the data. The most common are <code>Raw</code>, <code>Percent change</code>, <code>Annualized</code>, <code>Trail N</code> where <code>N</code> is a number of periods in the <code>date_period_text</code> column. There can be multiple transformations for each row. Transformations are delimited by semi-colons <code>;</code> and are stated <em>in order of transformation</em>. For example, <code>Trail 3;Percent change</code> will be the percentage change between the trailing 3 period average of the current period — denoted in the <code>date</code> column — and the trailing 3 period average of the previous period which is deduced from the <code>date_measure_text</code>. Conversely, <code>Percent change;Trail 3</code> will be the trailing 3 period average applied to the percentage change between the current period and the previous period across the data series. This will have a data type and class of <code>character</code>.</p></li>
<li><p><code>geo_entity_type_text</code>: The geographic entity <em>type</em> the data in the <code>value</code> column is covering. This will have a data type and class of <code>character</code>. If the region is in the United States there is a good chance it will be within the <a href="https://www2.census.gov/geo/pdfs/reference/geodiagram.pdf" class="external-link">Census Bureau Geographic Entity Hierarchy</a>.</p></li>
<li><p><code>geo_entity_text</code>: The name(s) geographic entity/entities that are described by the data.</p></li>
<li><p><code>viz_type_text</code>: The type of visualization made by the data in the <code>value</code> column. The most common are <code>Time series line</code>, <code>Bar</code>, <code>Map</code>, and <code>Scatter</code>. This will have a data type and class of <code>character</code>.</p></li>
</ul>
<div class="section level3">
<h3 id="naming-conventions">Naming conventions<a class="anchor" aria-label="anchor" href="#naming-conventions"></a>
</h3>
<p>Both CSVs and PNGs are named with the following format where each aspect of the data is delimited with a dash <code>-</code> and spaces are replaced with underscores <code>_</code>.</p>
<p>Data and visualization files will be named in the following order:</p>
<ol style="list-style-type: decimal">
<li><code>date</code></li>
<li><code>date_period_text</code></li>
<li><code>data_element_text</code></li>
<li><code>data_measure_text</code></li>
<li><code>date_measure_text</code></li>
<li><code>data_transform_text</code></li>
<li><code>geo_entity_type_text</code></li>
<li><code>geo_entity_text</code></li>
<li>
<em>Any other aspects of the data specific to the release that are needed to uniquely identify it.</em> Examples include <code>industry_text</code>, <code>size_class_text</code>, <code>seas_adj_text</code>, among others.</li>
<li><code>viz_type_text</code></li>
</ol>
<p>For data file and chart names with multiple dates in the <code>date</code> field — such as files with a the <code>viz_type_text</code> of <code>Time series line</code> — the <code>date</code> file naming convention will have the most and least recent dates in the data series.</p>
<div class="section level4">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h4>
<ul>
<li>CSV files:
<ul>
<li><code>2025-04-01_2023-04-01-monthly-quits-rate-current-2_data_transform-nation-us-total_nonfarm-all_size_classes-seasonally_adjusted-time_series_line.csv</code></li>
<li><code>2025-04-01-monthly-job_openings-rate-year-over-year-trail_3_percent_change-nation-us-12_industry-all_size_classes-seasonally_adjusted-bar.csv</code></li>
</ul>
</li>
<li>PNG files:
<ul>
<li><code>2025-04-01_2023-04-01-monthly-quits-rate-current-2_data_transform-nation-us-total_nonfarm-all_size_classes-seasonally_adjusted-time_series_line.png</code></li>
<li><code>2025-04-01-monthly-job_openings-rate-year-over-year-trail_3_percent_change-nation-us-12_industry-all_size_classes-seasonally_adjusted-bar.png</code></li>
</ul>
</li>
</ul>
<p>Every column in the dataset with the <code>_text</code> suffix will be included in the filename, in addition to the <code>date</code> column. Data files will also include columns that have further information that is <em>not</em> needed to uniquely identify the data series. Examples of this include the <code>value</code> column, variables with the <code>_code</code> suffix such as <code>industry_code</code>, <code>fips_code</code>,<code>preliminary_code</code>, as well as <code>moe</code>, and <code>moe_level</code>, among others.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<p><code><a href="reference/econ_value_summary.html">econ_value_summary()</a></code> filters an econanalyzr-valid data frame by either a set of dates or a closed date range, pulls a numeric column (defaults to “value”), and applies a user-supplied function to the filtered vector.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Minimal econanalyzr-valid example data</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  date                 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-01-01"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"month"</span>, length.out <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>,</span>
<span>  date_period_text     <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  value                <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">105</span>, <span class="fl">103</span>, <span class="fl">108</span>, <span class="fl">112</span>, <span class="fl">115</span><span class="op">)</span>,  <span class="co"># numeric (double)</span></span>
<span>  data_element_text    <span class="op">=</span> <span class="st">"Quits Rate"</span>,</span>
<span>  data_measure_text    <span class="op">=</span> <span class="st">"Percent"</span>,</span>
<span>  date_measure_text    <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  data_transform_text  <span class="op">=</span> <span class="st">"SA"</span>,</span>
<span>  geo_entity_type_text <span class="op">=</span> <span class="st">"Nation"</span>,</span>
<span>  geo_entity_text      <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  viz_type_text        <span class="op">=</span> <span class="st">"Line"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1) Inclusive set of dates: mean(value) on Feb &amp; May 2025</span></span>
<span><span class="fu">econanalyzr</span><span class="fu">::</span><span class="fu"><a href="reference/econ_value_summary.html">econ_value_summary</a></span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  dates       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2025-02-01"</span>, <span class="st">"2025-05-01"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  filter_type <span class="op">=</span> <span class="st">"inclusive"</span>,</span>
<span>  .fun        <span class="op">=</span> <span class="va">mean</span>,          <span class="co"># any function or function name is fine</span></span>
<span>  na_rm       <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># drop NAs before calling .fun</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 108.5</span></span>
<span></span>
<span><span class="co"># 2) Exclusive closed range: median(value) with Jan–Mar 2025 dropped</span></span>
<span><span class="fu">econanalyzr</span><span class="fu">::</span><span class="fu"><a href="reference/econ_value_summary.html">econ_value_summary</a></span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  date_range  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2025-01-01"</span>, <span class="st">"2025-03-31"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  filter_type <span class="op">=</span> <span class="st">"exclusive"</span>,   <span class="co"># drop rows in the range</span></span>
<span>  .fun        <span class="op">=</span> <span class="va">median</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 112</span></span>
<span></span>
<span><span class="co"># 3) Vector-returning function: quantiles over all dates</span></span>
<span><span class="fu">econanalyzr</span><span class="fu">::</span><span class="fu"><a href="reference/econ_value_summary.html">econ_value_summary</a></span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="fl">.5</span>, <span class="fl">.75</span><span class="op">)</span><span class="op">)</span>  <span class="co"># returns a numeric vector</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;   25%   50%   75% </span></span>
<span><span class="co">#&gt; 103.5 106.5 111.0</span></span></code></pre></div>
<p><code><a href="reference/econ_calc_trail_avg.html">econ_calc_trail_avg()</a></code> computes a right-aligned trailing average of <code>value</code> based on a user-specified window and appends those rows to your <code>econanalyzr</code> tibble in long form. Incomplete windows produce <code>NA</code>, and <code>; Trail {n}</code> is appended to the <code>data_transform_text</code> field where <code>n</code> is the length of the window.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Minimal econanalyzr-valid data (one series)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  date                 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-01-01"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"month"</span>, length.out <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>,</span>
<span>  date_period_text     <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  value                <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">105</span>, <span class="fl">103</span>, <span class="fl">108</span>, <span class="fl">112</span>, <span class="fl">115</span><span class="op">)</span>,  <span class="co"># double</span></span>
<span>  data_element_text    <span class="op">=</span> <span class="st">"Quits Rate"</span>,</span>
<span>  data_measure_text    <span class="op">=</span> <span class="st">"Percent"</span>,</span>
<span>  date_measure_text    <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  data_transform_text  <span class="op">=</span> <span class="st">"SA"</span>,</span>
<span>  geo_entity_type_text <span class="op">=</span> <span class="st">"Nation"</span>,</span>
<span>  geo_entity_text      <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  viz_type_text        <span class="op">=</span> <span class="st">"Line"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Append a 3-period trailing average (right-aligned; first 2 windows are NA)</span></span>
<span><span class="va">trail_df</span> <span class="op">&lt;-</span> <span class="fu">econanalyzr</span><span class="fu">::</span><span class="fu"><a href="reference/econ_calc_trail_avg.html">econ_calc_trail_avg</a></span><span class="op">(</span><span class="va">df</span>, trail_amount <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co"># Trailing-average rows are appended; identify them by the suffix in data_transform_text</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">trail_df</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"; Trail 3$"</span>, <span class="va">data_transform_text</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">value</span>, <span class="va">data_transform_text</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;   date       value data_transform_text</span></span>
<span><span class="co">#&gt;   &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt;              </span></span>
<span><span class="co">#&gt; 1 2025-01-01   NA  SA; Trail 3        </span></span>
<span><span class="co">#&gt; 2 2025-02-01   NA  SA; Trail 3        </span></span>
<span><span class="co">#&gt; 3 2025-03-01  103. SA; Trail 3        </span></span>
<span><span class="co">#&gt; 4 2025-04-01  105. SA; Trail 3        </span></span>
<span><span class="co">#&gt; 5 2025-05-01  108. SA; Trail 3        </span></span>
<span><span class="co">#&gt; 6 2025-06-01  112. SA; Trail 3</span></span>
<span></span>
<span><span class="co"># --- Grouped example: compute trailing average within each series ----------------</span></span>
<span></span>
<span><span class="va">df_g</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  date                 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-01-01"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"month"</span>, length.out <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  date_period_text     <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  value                <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">105</span>, <span class="fl">210</span>, <span class="fl">103</span>, <span class="fl">220</span>, <span class="fl">108</span>, <span class="fl">230</span>, <span class="fl">112</span>, <span class="fl">240</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  data_element_text    <span class="op">=</span> <span class="st">"Quits Rate"</span>,</span>
<span>  data_measure_text    <span class="op">=</span> <span class="st">"Percent"</span>,</span>
<span>  date_measure_text    <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  data_transform_text  <span class="op">=</span> <span class="st">"SA"</span>,</span>
<span>  geo_entity_type_text <span class="op">=</span> <span class="st">"Nation"</span>,</span>
<span>  geo_entity_text      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"US"</span>,<span class="st">"CA"</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>,</span>
<span>  viz_type_text        <span class="op">=</span> <span class="st">"Line"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">out_g</span> <span class="op">&lt;-</span> <span class="va">df_g</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_entity_text</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">econanalyzr</span><span class="fu">::</span><span class="fu"><a href="reference/econ_calc_trail_avg.html">econ_calc_trail_avg</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show trailing-average rows per country (suffix identifies derived rows)</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">out_g</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"; Trail 3$"</span>, <span class="va">data_transform_text</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_entity_text</span>, <span class="va">date</span>, <span class="va">value</span>, <span class="va">data_transform_text</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">geo_entity_text</span>, <span class="va">date</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;    geo_entity_text date       value data_transform_text</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;           &lt;date&gt;     &lt;dbl&gt; &lt;chr&gt;              </span></span>
<span><span class="co">#&gt;  1 CA              2025-01-01   NA  SA; Trail 3        </span></span>
<span><span class="co">#&gt;  2 CA              2025-02-01   NA  SA; Trail 3        </span></span>
<span><span class="co">#&gt;  3 CA              2025-03-01  210  SA; Trail 3        </span></span>
<span><span class="co">#&gt;  4 CA              2025-04-01  220  SA; Trail 3        </span></span>
<span><span class="co">#&gt;  5 CA              2025-05-01  230  SA; Trail 3        </span></span>
<span><span class="co">#&gt;  6 US              2025-01-01   NA  SA; Trail 3        </span></span>
<span><span class="co">#&gt;  7 US              2025-02-01   NA  SA; Trail 3        </span></span>
<span><span class="co">#&gt;  8 US              2025-03-01  103. SA; Trail 3        </span></span>
<span><span class="co">#&gt;  9 US              2025-04-01  105. SA; Trail 3        </span></span>
<span><span class="co">#&gt; 10 US              2025-05-01  108. SA; Trail 3</span></span>
<span><span class="co">#&gt; Each country's trailing means are computed independently within its group.</span></span></code></pre></div>
<p><code><a href="reference/econ_filter_dates.html">econ_filter_dates()</a></code> filters an econanalyzr-valid data frame to a closed date interval <code>[start_date, end_date]</code>. If <code>start_date</code> is omitted, you can specify a period (<code>period_type</code> + <code>period_amount</code>) and it derives <code>start_date = end_date − period</code> (with <code>end_date</code> defaulting to the latest non-NA date). Returns rows inclusive of the bounds and ordered newest-first.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Minimal econanalyzr-valid table (10 monthly points)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  date                 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-09-01"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"month"</span>, length.out <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>  date_period_text     <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  value                <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>  data_element_text    <span class="op">=</span> <span class="st">"Quits Rate"</span>,</span>
<span>  data_measure_text    <span class="op">=</span> <span class="st">"Percent"</span>,</span>
<span>  date_measure_text    <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  data_transform_text  <span class="op">=</span> <span class="st">"SA"</span>,</span>
<span>  geo_entity_type_text <span class="op">=</span> <span class="st">"Nation"</span>,</span>
<span>  geo_entity_text      <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  viz_type_text        <span class="op">=</span> <span class="st">"Line"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1) Last 4 months ending at the table’s latest date (derives start_date)</span></span>
<span><span class="va">last4</span> <span class="op">&lt;-</span> <span class="fu">econanalyzr</span><span class="fu">::</span><span class="fu"><a href="reference/econ_filter_dates.html">econ_filter_dates</a></span><span class="op">(</span></span>
<span>  <span class="va">df</span>, period_type <span class="op">=</span> <span class="st">"months"</span>, period_amount <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Filtered to [2025-02-01, 2025-06-01] (closed interval).</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">last4</span>, <span class="va">date</span>, <span class="va">value</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span><span class="co">#&gt;   date       value</span></span>
<span><span class="co">#&gt;   &lt;date&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 2025-06-01   100</span></span>
<span><span class="co">#&gt; 2 2025-05-01    90</span></span>
<span><span class="co">#&gt; 3 2025-04-01    80</span></span>
<span><span class="co">#&gt; 4 2025-03-01    70</span></span>
<span><span class="co">#&gt; 5 2025-02-01    60</span></span>
<span></span>
<span></span>
<span><span class="co"># 2) Between explicit dates (inclusive)</span></span>
<span><span class="va">rng</span> <span class="op">&lt;-</span> <span class="fu">econanalyzr</span><span class="fu">::</span><span class="fu"><a href="reference/econ_filter_dates.html">econ_filter_dates</a></span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-02-01"</span><span class="op">)</span>,</span>
<span>  end_date   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-06-01"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Filtered to [2025-02-01, 2025-06-01] (closed interval).</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">rng</span>, <span class="va">date</span>, <span class="va">value</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span><span class="co">#&gt;   date       value</span></span>
<span><span class="co">#&gt;   &lt;date&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 2025-06-01   100</span></span>
<span><span class="co">#&gt; 2 2025-05-01    90</span></span>
<span><span class="co">#&gt; 3 2025-04-01    80</span></span>
<span><span class="co">#&gt; 4 2025-03-01    70</span></span>
<span><span class="co">#&gt; 5 2025-02-01    60</span></span></code></pre></div>
<p><code><a href="reference/econ_csv_write_out.html">econ_csv_write_out()</a></code> validates an econanalyzr data frame and writes it to CSV using a descriptive filename built from the date span and all *_text columns.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://anesta95.github.io/econanalyzr/" class="external-link">econanalyzr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Minimal econanalyzr-valid tibble</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  date                 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-01-01"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"month"</span>, length.out <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>,</span>
<span>  date_period_text     <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  value                <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">105</span>, <span class="fl">103</span>, <span class="fl">108</span>, <span class="fl">112</span>, <span class="fl">115</span><span class="op">)</span>,</span>
<span>  data_element_text    <span class="op">=</span> <span class="st">"Quits Rate"</span>,</span>
<span>  data_measure_text    <span class="op">=</span> <span class="st">"Percent"</span>,</span>
<span>  date_measure_text    <span class="op">=</span> <span class="st">"Monthly"</span>,</span>
<span>  data_transform_text  <span class="op">=</span> <span class="st">"SA"</span>,</span>
<span>  geo_entity_type_text <span class="op">=</span> <span class="st">"Nation"</span>,</span>
<span>  geo_entity_text      <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  viz_type_text        <span class="op">=</span> <span class="st">"Line"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write to a temporary folder with a descriptive, sanitized filename</span></span>
<span><span class="va">outdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu">econanalyzr</span><span class="fu">::</span><span class="fu"><a href="reference/econ_csv_write_out.html">econ_csv_write_out</a></span><span class="op">(</span><span class="va">df</span>, folder <span class="op">=</span> <span class="va">outdir</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Wrote CSV:</span></span>
<span><span class="co">#&gt; /tmp/RtmpccYq7b/2025-06-01_2025-01-01-monthly-quits_rate-percent-monthly-sa-nation-us-line.csv</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2025-06-01_2025-01-01-monthly-quits_rate-percent-monthly-sa-nation-us-line.csv"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-visualization-examples">Data Visualization Examples<a class="anchor" aria-label="anchor" href="#data-visualization-examples"></a>
</h2>
<p>Economic <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> data visualization templates to come!</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/anesta95/econanalyzr/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing econanalyzr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Adrian Nesta <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adrian Nesta.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
